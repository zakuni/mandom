<head>
  <title>mandom</title>
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <style type="text/css">
    #timer {
      font-size: 15em;
      font-family: 'Lato', sans-serif;
    }
  </style>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="node_modules/easytimer.js/dist/easytimer.js"></script>
  <script type="text/javascript">
    const timer = new Timer();
    timer.start({countdown: true, startValues: [0,3,0,0,0]});
    timer.addEventListener('secondsUpdated', function (e) {
      document.querySelector('#timer').innerHTML = timer.getTimeValues().toString();
    });
    timer.addEventListener('targetAchieved', function (e) {
      document.querySelector('#timer').style.color = '#dd0000'
      timer.stop();
      timer.start({
        countdown: false,
        startValues: [0,0,0,0,0],
        target: null // target is set to avoid targetAchieved event to be dispatched.
      });
    });

    var socket = io();
    socket.on('time', function(msg){
      document.querySelector('#timer').style.color = '#000000'
      timer.stop();
      timer.start({countdown: true, startValues: msg});
    });
  </script>
</head>
<body>
  <div id='timer'></div>
  <form id="timeForm">
    <input type="text" id="time" name="time" />
    <input type="submit" value="start"></input>
  </form>
  <script type="text/javascript">
    document.getElementById("timeForm").addEventListener("submit", function(e) {
      e.preventDefault();
      socket.emit('time', [0,0,document.getElementById("time").value-0,0,0]);
    });
  </script>
</body>
